<?xml version="1.0" encoding="UTF-8"?>
<templates id="new_pos_invoice_appexbo" inherit_id="point_of_sale.template" xml:space="preserve">
     <t t-name="OrderReceipt" t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension" owl="1">
        <xpath expr="//div[hasclass('pos-receipt')]" position="replace">
            <div class="pos-receipt">
                <div style="border-radius:10px ;border: 1px solid #04aa6b; font-size:14px;width:75%;margin: auto;text-align:center;">
                    <t t-if="props.data.is_gcc_country and !props.data.is_settlement">
                        <img t-if="props.data.qr_code" id="qrcode" t-att-src="props.data.qr_code" class="pos-receipt-qrcode"/>
                        <br/>
                    </t>
                    <div> <strong>Factura Simplificada </strong></div>
                    <div> <strong>Simplified Tax Invoice </strong> </div>
                </div>
                <div style="border-radius:10px ;border: 1px solid #04aa6b; font-size:10px;width:50%;margin: 2px auto;text-align:center;">
                    <strong>Número de Factura</strong>
                    <br/>
                    <t t-esc="props.data.name"/>
                </div>
                <div style="border-radius:10px ;border: 1px solid #04aa6b; font-size:12px;width:70%;margin: 2px auto;text-align:center;">
                    <h3><t t-esc="props.data.headerData.company.name" /></h3>
                </div>
                <div class="pos-receipt-contact">
                    <t t-if="props.data.headerData.company.vat">
                        <div style="border-radius:10px ;border: 1px solid #04aa6b; font-size:12px;width:70%;margin: 2px auto;text-align:center;">
                            <strong>Número de IVA:</strong>
                            <t t-esc="props.data.headerData.company.vat"/>
                        </div>
                    </t>
                    <div style="border-radius:10px ;border: 1px solid #04aa6b; font-size:10px;width:70%;margin: 2px auto;text-align:center;">
                        Fecha:
                        <t t-esc="props.data.date"/>
                    </div>
                    <t t-if="props.data.headerData.header_html">
                        <t t-out="props.data.headerData.header_html"/>
                    </t>
                    <t t-if="!props.data.headerData.header_html and props.data.headerData.header">
                        <div style="white-space:pre-line"><t t-esc="props.data.headerData.header" /></div>
                    </t>
                </div>
                <br/>
                <!-- Líneas de Pedido -->
                <table style="border-radius:10px ;border: 1px solid #04aa6b;width:100%;text-align:center;" class="orderlines">
                    <tr style="border: 1px solid #04aa6b;">
                        <th style="border: 1px solid #04aa6b;font-size:10px;">Subtotal</th>
                        <th style="border: 1px solid #04aa6b;font-size:10px;">Precio</th>
                        <th style="border: 1px solid #04aa6b;font-size:10px;">Cantidad</th>
                        <th style="border: 1px dotted #04aa6b;font-size:10px;">Producto</th>
                    </tr>
                    <t t-foreach="props.data.orderlines" t-as="line" t-key="line.id">
                        <tr style="border: 1px solid #04aa6b;">
                            <td style="border: 1px solid #04aa6b;"><t t-esc="line.price" /></td>
                            <td style="border: 1px solid;"><s t-esc="line.oldUnitPrice" t-if="line.oldUnitPrice" />
                                <t t-esc="line.unitPrice"/></td>
                            <td style="border: 1px solid #04aa6b;"><t t-esc="line.qty" /> </td>
                            <td style="border: 1px solid #04aa6b;"><t t-esc="line.productName" />
                                <t t-if="line.discount !== 0">
                                    <div class="pos-receipt-left-padding" style="font-size:10px;">
                                        Desc.:<t t-esc="line.discount"/>%
                                    </div>
                                </t>
                            </td>
                        </tr>
                    </t>
                </table>
                <br/>
                <table style="1px solid #04aa6b;width:60%;text-align:center;margin-bottom:4px;" class="orderlines">
                    <tr style="border: 1px solid #04aa6b;">
                        <td style="border: 1px solid #04aa6b;"><t t-esc="props.formatCurrency(props.data.amount_total)"/></td>
                        <td style="border: 1px solid #04aa6b;">Total</td>
                    </tr>
                    <tr style="border: 1px solid #04aa6b;">
                        <td style="border: 1px solid #04aa6b;"><t t-esc='props.formatCurrency(props.data.amount_total + props.data.rounding_applied)'/></td>
                        <td style="border: 1px solid #04aa6b;">A Pagar</td>
                    </tr>
                    <t t-if="props.data.total_discount">
                        <tr style="border: 1px solid #04aa6b;">
                            <td style="border: 1px solid #04aa6b;"><t t-esc="props.format_currency(props.data.total_discount)"/></td>
                            <td style="border: 1px solid #04aa6b;">Descuentos</td>
                        </tr>
                    </t>
                </table>
                <br/>
                <div class="before-footer"/>
                <br/>
                <br/>
                <div t-if="props.data.footer" class="pos-receipt-center-align">
                    <t t-out="props.data.footer"/>
                </div>
                <div style="text-align: center;">--------------------------------</div>
                <br/>
                <div class="pos-receipt-order-data">
                    <div><t t-esc="props.data.name" /></div>
                    <t t-if="props.data.date">
                        <div><t t-esc="props.data.date" /></div>
                    </t>
                    <t t-if="props.data.cashier">
                        <div class="cashier">
                            <div>Atendido por <t t-esc="props.data.cashier"/></div>
                        </div>
                    </t>
                </div>
            </div>
        </xpath>
    </t>
</templates>
